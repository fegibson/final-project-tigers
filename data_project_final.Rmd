---
title: "Final Data Project"
author: "Faith Gibson"
output: html_notebook
---

# Final Data Project

## Your objectives!

To complete this project there are a few requirements you will need to fulfill. Remember that you are not on your own for this project! Data science is done best as a community, so please ask others (and instructors) questions you have when you get stuck!

1. Clearly state the data science question and goal for the analysis you are embarking on.

2. This project should be completely uploaded and up to date on GitHub. Follow the steps in `Pushing and Pulling Changes` chapter for how to git add, commit, and push the changes you have done.

3. Follow good organization principles -- you should at least have 2 folders: a `results` folder and a `data` folder.

4. You should also have a README

5. Make a resulting plot that you save to a file.

6. Write up your final observations in regards to your original question. Note that some data science projects end with "This isn't what I thought it would be" or "that's strange" or "I think this is leading into another question I would need to investigate". Whatever your observations may be, write them up in your main R Markdown.

7. When you feel your analysis is ready for review, send your instructor the GitHub link to your project so they can review it.

8. Pat yourself on the back for all this work! You are a data scientist!

## Data Sources

* Characteristics of Human-Tiger Conflicts in Indian Sundarban: https://doi.org/10.7910/DVN/YS0WTE
(By Chatterjee, Mayukh et al.)
    + Summary of Data: Survey collecting data from a sample of 1,095 people in the Sundarbans region of West Bengal, India recounting details of  human-tiger conflicts from survivors, relatives, and eyewitnesses, as well as answers to open-ended questions aiming to assess participants' prior knowledge and perception regarding tigers. The survey was carried out between August 2018 and November 2019.

* Wildlife Protection Society of India (WPSI)'s Tiger Poaching Statistics 1994-2023: https://www.wpsi-india.org/statistics/index.php > Tiger Mortality > Tiger Poaching 1994-2023
    + Recreated by hand into a Google Sheet here: https://docs.google.com/spreadsheets/d/1G7aOVW9Jfa8vUMYe-YWrQUCyIFWQcj7uvLl7veB1Hzw/edit?usp=sharing
    + Summary of Data: Compiled reports of known cases of unnatural tiger deaths caused by poachers across all of India, ranging from the year 1994 to 2023.

NTS: ideally, find a dataset on tiger prey populations from 1994-2023 and add it here

## The Goal of This Analysis

Since the dawn of human civilization in India, humans have found themselves in conflict with tigers, big cats who have inhabited the land since long before our species took our first steps out of Africa. This conflict was, at one point, so great that we almost hunted the tiger to extinction, leading to it being granted the status of protected species in recent years.

In this project, I set out to answer some questions I've had since learning about these cats as a young teen: "Why did we hunt tigers to such an extreme? Are tigers really that aggressive and dangerous? Do tigers also believe in the 'Golden Rule'?"

Or, in a more 'data scientist' way to sum up these questions: "What interspecies and/or environmental variables have had an influence on tigers' disposition towards humans over time?"

## Setting Up

Load packages you will need for this analysis.

```{r}
install.packages("usethis")
install.packages("janitor")
```

```{r}
library(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(usethis)
library(janitor)
```

## Setting Up Directories

Set up the directories you will need.

```{r}
if (!dir.exists("data")) {
  dir.create("data")
}
if (!dir.exists("data/raw_data")) {
  dir.create("data/raw_data")
}
if (!dir.exists("data/tidy_data")) {
  dir.create("data/tidy_data")
}
if (!dir.exists("results")) {
  dir.create("results")
}
```


## Getting the Data

The [first dataset](https://doi.org/10.7910/DVN/YS0WTE) describes characteristics of human-tiger conflicts, collected from 1,095 participants in the Sundarbans region of West Bengal, India via survey carried out between August 2018 and November 2019.

The following variables are included in this dataset:
  * Sl. No. (presumably Slot Number/ID)
  * Time of Attack
  * Year of Attack
  * District
  * Block
  * Island Name
  * Gram Panchayat (governing institution of village)
  * Village Name
  * Latitude of Village
  * Longitude of Village
  * Victim Gender
  * Victim Age
  * Primary Occupation of Victim
  * Primary Occupation_2
  * Victim Secondary Occupation
  * Victim Secondary Occupation_2
  * Victim's Primary Occupation After Attack
  * Victim's Average Annual Income
  * Land Owned by Victim (Bighas)
  * Boat Ownership of Victim
  * Education Level of Victim
  * Marital Status of Victim
  * Number of Dependents in Family of Victim
  * Religious Background of Victim's Family
  * Ethnicity of Victim's Family
  * Permit Holding Status of Victim
  * Animal Involved in Attack
  * Sex of Animal (if Identified)
  * Age Class of Animal (if Identified)
  * Location of Attack
  * Substrate Where Attack Occured
  * Number of Eyewitnesses Present
  * Outcome of Attack (on Victim)
  * Position of Victim During Attack
  * Direction of Attack
  * Nature of Injury on Victim's Body
  * Activity of Victim During Attack
  * Tidal Status During Attack
  * Distance Body/Victim Was Dragged by Animal
  * Body/Victim Recovery Time (Hours)
  * Recieved Medical Aid?
  * Body Recovery Status
  * Body of Victim Consumed (Approx %)
  * PM Conducted Status
  * Reported to Police
  * Reported to FD (Forest Department)
  * If Not, Why Not Reported
  * Ex Gratia Filed/Not Filed
  * Ex Gratia Amount Recieved
  * Perception of Tiger Population in Sundarban (numbers)
  * Perception of Area covered by the Sundarbans - Sq. Km.
  * Perception - Environmental Beneficts of Sundarban
  * Perception - When Did Humans Arrive Here
  * Perception - Why Tigers Attack Humans
  * Perception - Why Tigers Attack Humans_2
  * Perception - What Can Reduce Attacks
  * perception_awareness_attitude:how_to_reduce_attacks_other

The [second dataset](https://docs.google.com/spreadsheets/d/1G7aOVW9Jfa8vUMYe-YWrQUCyIFWQcj7uvLl7veB1Hzw/edit?usp=sharing) is a ~~much more simple~~ table, recorded by hand using public data from the Wildlife Protection Society of India, found [here](https://www.wpsi-india.org/statistics/index.php).

The following variables are included in this dataset:
 * year
 * tigers_killed

```{r}
tiger_conflict_df <- read_csv("data/raw_data/sundarban_tiger_conflict_data.csv")

tiger_poaching_df <- read_csv("data/raw_data/tiger_poaching_data.csv")
```

## Exploring the Data

```{r}
head(tiger_conflict_df)
```

```{r}
print(tiger_poaching_df)
```

## Cleaning the data


```{r}
# Make column names easier to work with
tiger_conflict_df <- tiger_conflict_df %>% clean_names()

# Fix typos in column names
tiger_conflict_df <- tiger_conflict_df %>%
  rename(activity_of_victim_during_attack = activitiy_of_victim_during_attack) %>% 
  rename(distance_body_victim_was_dragged_by_animal = distnace_body_victim_was_dragged_by_animal)
  
```

Don't forget to save this as a file in the tidy_data directory!

```{r}
write_csv(tiger_conflict_df, "data/tidy_data/tiger_conflict_df.csv")
```


While tiger_conflict_df is rich in variables to explore, a lot of them don't seem to be all that relevant to our analysis. So, we will be selecting the ones we really want to focus on and save them to a separate object with the following code:

```{r}
conflict_df_clean <- tiger_conflict_df %>% 
  select(sl_no, year_of_attack, victim_gender, victim_age, permit_holding_status_of_victim, location_of_attack, activity_of_victim_during_attack, body_of_victim_consumed_approx_percent, perception_why_tigers_attack_humans, perception_what_can_reduce_attacks)
```

We'll also want to reduce our number of observations to only include those that fall within the range of years in tiger_poaching_df, so we can compare the information in both data frames more easily. We can achieve this by using an inner join:

```{r}
tiger_df_combined <- conflict_df_clean %>% inner_join(tiger_poaching_df, by = join_by(year_of_attack == year))
```

Now that our data frames are combined, we finally arrive at the fun part...

## Plotting the Data!

```{r}
ggplot(aes(VARIABLE)) +
  geom_point()
```

## Getting the Stats


### Conclusion

Write up your thoughts about this data science project here and answer the following questions:

- What did you find out in regards to your original question?

- What exceptions or caveats do you have in regards to your analysis you did?

- What follow up questions do you have?

## Print out session info

Session info is a good thing to print out at the end of your notebooks so that you (and other folks) referencing your notebooks know what software versions and libraries you used to run the notebook.

```{r}
sessionInfo()
```
